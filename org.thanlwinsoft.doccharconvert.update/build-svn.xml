<?xml version="1.0" encoding="UTF-8"?>
<project name="org.thanlwinsoft.doccharconvert.svn" default="default" basedir=".">

	<path id="svnant.class.path">
		<fileset dir="../org.tigris.subversion.svnant/libs">
			<include name="**/*.jar"/>
		</fileset>
	</path>
	
	<typedef resource="org/tigris/subversion/svnant/svnantlib.xml" 
		classpathref="svnant.class.path" />
	
	<target name="default" description="update All Projects">

		<antcall target="update" >
			<param name="projectName" value="org.thanlwinsoft.doccharconvert"/>
		</antcall>

		<antcall target="update" >
			<param name="projectName" value="org.thanlwinsoft.doccharconvert.converters.mien"/>
		</antcall>

		<antcall target="update" >
			<param name="projectName" value="org.thanlwinsoft.doccharconvert.converters.myanmar"/>
		</antcall>
		
		<antcall target="update" >
			<param name="projectName" value="org.thanlwinsoft.doccharconvert.ide"/>
		</antcall>

		<antcall target="update" >
			<param name="projectName" value="org.thanlwinsoft.doccharconvert.parsers.languagetest"/>
		</antcall>
		
	</target>
	
	<target name="update">
		<antcall target="update-manifest" >
		</antcall>
		<!--<eclipse.buildScript elements="bundle@${projectName}" buildDirectory="../${projectName}"/>-->
		<ant dir="../${projectName}" target="build.update.jar"/>
	</target>

<target name="update-manifest" description="Update SVN version in Manifest">
		<svn>
			<info target="../${projectName}"/>
			<wcVersion path="../${projectName}" prefix="svn."/>
		</svn>
		<condition property="modified.flag" value="m" else="">
			<isset property="svn.modified"/>
		</condition>
		<property file="../${projectName}/plugin.properties" prefix="plugin"/>

		<manifest file="../${projectName}/META-INF/MANIFEST.MF" mode="update">
		<attribute name="Bundle-Version" value="${plugin.version}.svn${svn.info.lastRev}${modified.flag}"/>
		</manifest>
		
		
</target>

</project>